<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta content="width=1200" name="viewport"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="data:image/png;base64,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" rel="shortcut icon" type="image/x-icon"/>
  <title>Bientôt à l'affiche au Cinéma centre-ville | St-Georges</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"/>
  <link href="style.css" rel="stylesheet"/>
</head>
<body>
<!--
<header>
<a href="https://www.cine-flash.com/">
<img alt="Cinéma centre-ville Laser par BARCO" id="banner" src="https://veeziustaskscm.blob.core.windows.net/veezi-ticketing-assets/jjwk2hm92x8zmdt4ys4sr1vvp0/banner?202508291726"/>
</a>
</header> -->
<main>
   <h1>BIENTÔT À L'AFFICHE</h1>
   <h4>*(Sujet à changement sans préavis)</h4>
   <div id="films-container" class="card-container"></div>
</main>

 <script>
      async function chargerFilms() {
      const container = document.getElementById("films-container");

      try {
        const response = await fetch("bientot.json");
        const films = await response.json();

        // Regrouper les films par mois et année (ex: "OCTOBRE 2025")
        const filmsParMois = {};

        films.forEach(film => {
          const date = new Date(film.OpeningDate);
          const mois = date.toLocaleString("fr-FR", { month: "long" }).toUpperCase();
          const annee = date.getFullYear();
          const cle = `${mois} ${annee}`;

          if (!filmsParMois[cle]) {
            filmsParMois[cle] = [];
          }
          filmsParMois[cle].push(film);
        });

        // Générer le HTML
        for (const [mois, filmsDuMois] of Object.entries(filmsParMois)) {
          const titreMois = document.createElement("h2");
          titreMois.textContent = mois;
          container.appendChild(titreMois);

          const section = document.createElement("section");
          section.className = "card-container";

          filmsDuMois.forEach(film => {
            const card = document.createElement("div");
            card.className = "card";

            // Affiche
            if (film.affiche) {
              const posterDiv = document.createElement("div");
              posterDiv.className = "poster";

              const img = document.createElement("img");
              img.src = film.affiche;
              img.alt = "Affiche de " + film.titre;

              // Si une bande-annonce est disponible
              if (film.bande_annonce) {
                img.style.cursor = "pointer";
                img.addEventListener("click", () => {
                  if (
                    film.bande_annonce.includes("youtube.com") ||
                    film.bande_annonce.includes("youtu.be") ||
                    film.bande_annonce.includes("vimeo.com")
                  ) {
                    // Crée la modale
                    const modal = document.createElement("div");
                    modal.className = "modal";

                    const modalContent = document.createElement("div");
                    modalContent.className = "modal-content";

                    const closeBtn = document.createElement("span");
                    closeBtn.className = "close";
                    closeBtn.innerHTML = "&times;";
                    closeBtn.onclick = () => {
                      modal.style.display = "none";
                      modal.remove(); // Nettoyage
                    };

                    const iframe = document.createElement("iframe");
                    let src = film.bande_annonce;

                    // Adaptation pour YouTube
                    if (src.includes("watch?v=")) {
                      src = src.replace("watch?v=", "embed/");
                    } else if (src.includes("youtu.be/")) {
                      src = src.replace("youtu.be/", "www.youtube.com/embed/");
                    }

                    // Adaptation pour Vimeo
                    else if (src.includes("vimeo.com/")) {
                      const match = src.match(/vimeo\.com\/(\d+)/);
                      if (match && match[1]) {
                        const videoId = match[1];
                          src = `https://player.vimeo.com/video/${videoId}`;
                      }
                    }
                    src += "?autoplay=1&mute=1";
                    iframe.src = src;
                    iframe.width = "640";
                    iframe.height = "360";
                    iframe.frameBorder = "0";
                    iframe.allowFullscreen = true;
                    iframe.allow = "autoplay; encrypted-media";

                    document.body.appendChild(iframe);

                    modalContent.appendChild(closeBtn);
                    modalContent.appendChild(iframe);
                    modal.appendChild(modalContent);
                    document.body.appendChild(modal);

                    // Affiche la modale
                    modal.style.display = "block";
                  } else {
                    window.open(film.bande_annonce, "_blank");
                  }
                });
              }

              posterDiv.appendChild(img);
              card.appendChild(posterDiv);
            }
            // Date : 25 OCTOBRE
            const dateDiv = document.createElement("div");
            dateDiv.className = "date";
            const date = new Date(film.OpeningDate);
            const jour = date.getDate();
            const mois = date.toLocaleString("fr-FR", { month: "long" }).toUpperCase();
            dateDiv.innerHTML = `<strong>${jour} ${mois}</strong>`;
            card.appendChild(dateDiv);

            section.appendChild(card);
          });

          container.appendChild(section);
        }
      } catch (error) {
        console.error("Erreur lors du chargement des films :", error);
        container.innerHTML = "<p>Impossible de charger les films pour le moment.</p>";
      }
    }

    chargerFilms();
  </script>
</body>
</html>
